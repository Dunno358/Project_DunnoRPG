{% extends 'master.html' %}
{% load filters %}

{% block content %}
{% include 'top_bar.html' %}

<div class='container mt-0'>

    <div class='row text-border-black'>
        <div class='col text-center c-gold fst-italic m-0 p-0 border-end border-bottom border-warning bg-dark bg-gradient'>
            <h2>
                Wytrzymałość: {{ item.maxDurability }}
            </h2>
        </div>
        <div class='col text-center c-gold fst-italic m-0 p-0 border-bottom border-warning bg-dark bg-gradient'>
            <h2>
                Zasięg ataku: <br>{{ item.name|getItemRange }}
            </h2>
        </div>
    </div>

    <div class='row text-border-black mt-2'>
        <div class='col text-center c-gold fst-italic '>
            <h1 id="item-name" class="{{ item.rarity }}">{{ item.name }}</h1>
        </div>
    </div>

    <div class='row mt-2 text-border-black'>
        <div class='col text-center c-gold fst-italic m-0 p-0'>
            <h2>
                Typ: {{ item.name|getItemType:'pl' }} ({{ item.name|getArmorWeightType }})
            </h2>
        </div>
    </div>

    <div class='row mt-4'>
        <div class='col bg-opacity-75 text-center c-gold bg-dark border border-warning rounded ms-5 me-5 p-1 pt-2'>
            {% if item.name|isShield %}
                <h2>Block: {{ item.block }}</h2>
            {% elif item.name|isArmor %}
                <h2>Armor: {{ item.armor }}</h2>
            {% elif item.type == 'Other' %}
                <h2>Usable or valuable item</h2>
            {% elif item.type == 'Animal' %}
                <h2>PŻ: {{ item.maxDurability }} | Armor: {{ item.armor }}</h2>
            {% elif item.type == 'Wand' %}
                <h2>{{ item.name|getStaffMagicDmg:0 }}</h2>
            {% else %}
                <h2>1K{% if item.diceBonus >= 0 %}+{% endif %}{{ item.diceBonus }}, {{ item.AP }}AP</h2>
            {% endif %}
        </div>
    </div>

    {% if item.skill != '' %}
        <div class='row'>
            <div class='col bg-opacity-75 text-center c-gold bg-dark rounded border border-warning border-top-0 ms-5 me-5 p-1 pt-2'>
                    {{ item.skill }}
            </div>
        </div>    
    {% endif %}

    <div class='row'>
        <div 
        class='col text-center c-gold bg-dark ms50 me50 bg-opacity-75 border border-warning border-top-0 d-none'
        onclick='showDesc()' id='desc-btn'
        >
            &darr;
        </div>
    </div>

    <div id='item_desc' class='mt-3'>
        <div class='row'>
            <div 
            class='col text-center c-gold bg-dark ms50 me50 bg-opacity-75 border border-warning border-bottom-0 bg-gradient'
            onclick='hideDesc()'
            >
                &uarr;
            </div>
        </div>
        <div class='row'>
            <div class='col bg-opacity-75 text-center c-gold bg-dark border border-warning rounded ms-5 me-5 p-2 fst-italic bg-gradient'>
                {{ item.desc }}
            </div>
        </div>
    </div>

    <div class='row mt-5 c-gold text-center mb-1'>
        <div class='col bg-dark p-2 border border-warning rounded ms-3 me-3'>
            <h5>Price: {{ item.price }}</h5>
        </div>
        <div class='col bg-dark p-2 border border-warning rounded ms-2 me-2'>
            {% if item.type == 'Animal' %}
            <h5>Extra capacity: +{{ item.diceBonus }}kg</h5>
            {% else %}
            <h5>Weight: {{ item.weight }}kg</h5>
            {% endif %}
        </div>
    </div>

</div>

<script>
    document.title = document.getElementById("item-name").innerHTML + " | DunnoRPG"
    document.getElementById('tb-items').classList.remove('btn-outline-warning')
    document.getElementById('tb-items').classList.add('btn-outline-primary')

    function showDesc(){
        document.getElementById('desc-btn').classList.add('d-none')
        document.getElementById('item_desc').classList.remove('d-none')
    }

    function hideDesc(instance){
        document.getElementById('item_desc').classList.add('d-none')
        document.getElementById('desc-btn').classList.remove('d-none')
    }
</script>

{% endblock content %}